# Проект Skinport API

## Описание
Проект реализует API для получения данных о минимальных ценах предметов с Skinport, с кэшированием в Redis, а также позволяет пользователям совершать покупки товаров.

## Запуск проекта
Запустить проект можно с помощью `make`:
```sh
make start
```
Используется `docker-compose` для поднятия всех необходимых сервисов.

## Доступные эндпоинты
- `GET /skinport` - возвращает список предметов с двумя минимальными ценами (tradable и non-tradable). Ответ кэшируется в Redis на 5 минут.
```shell
curl --location 'localhost:3000/skinport'
```
- `POST /seed` - заполняет базу данных тестовыми пользователями и товарами. В ответе отобразится список пользователей и товаров.
```shell
curl --location --request POST 'localhost:3000/seed'
```
- `POST /purchase` - выполняет покупку товара пользователем. В теле запроса передаются `userId` и `productId`. Баланс пользователя уменьшается, но не может стать отрицательным.
```shell
curl --location 'localhost:3000/purchase' \
--header 'Content-Type: application/json' \
--data '{
    "userId": "e644218e-8375-4c78-9530-9b6dbe462c81",
    "productId": "f97d89b4-39ea-4f0c-9cff-acdd91a9225e"
}' 
```

## Используемый стек
- TypeScript
- Hono (фреймворк)
- Redis (кэширование)
- PostgreSQL (база данных)
- Docker + docker-compose

## Примечание
Первая задача выполнена. Вторая задача (покупка товаров) реализована с учетом транзакций и проверки баланса.

## TODO:
- [ ] Внедрить логгер
- [ ] Использовать инверсию зависимостей
- [ ] Проверить типизацию
- [ ] Проверить запись значения по ключу в redis при наличии нескольких инстансов

